<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Dashboard</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- favicon
		============================================ -->
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <!-- Google Fonts
		============================================ -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/owl.theme.css">
    <link rel="stylesheet" href="css/owl.transitions.css">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="css/normalize.css">
    <!-- meanmenu icon CSS
		============================================ -->
    <link rel="stylesheet" href="css/meanmenu.min.css">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="css/main.css">
    <!-- educate icon CSS
		============================================ -->
    <link rel="stylesheet" href="css/educate-custon-icon.css">
    <!-- morrisjs CSS
		============================================ -->
    <link rel="stylesheet" href="css/morrisjs/morris.css">
    <!-- mCustomScrollbar CSS
		============================================ -->
    <link rel="stylesheet" href="css/scrollbar/jquery.mCustomScrollbar.min.css">
    <!-- metisMenu CSS
		============================================ -->
    <link rel="stylesheet" href="css/metisMenu/metisMenu.min.css">
    <link rel="stylesheet" href="css/metisMenu/metisMenu-vertical.css">
    <!-- calendar CSS
		============================================ -->
    <link rel="stylesheet" href="css/calendar/fullcalendar.min.css">
    <link rel="stylesheet" href="css/calendar/fullcalendar.print.min.css">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="css/style.css">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- modernizr JS
		============================================ -->
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>
</head>

<body>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    .container {
        max-width: 600px;
        margin: 50px auto;
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
        text-align: center;
        color: #333;
    }
    form {
        margin-top: 20px;
    }
    label {
        display: block;
        font-weight: bold;
        margin-bottom: 5px;
    }
    select,
    button {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
        font-size: 16px;
    }
    button {
        background-color: #007bff;
        color: #fff;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    button:hover {
        background-color: #0056b3;
    }
    .message {
        text-align: center;
        color: #ff0000;
        margin-top: 15px;
    }
</style>

<!-- Start Welcome area -->
<div class="all-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="logo-pro">
                    <a href="/home"><img class="main-logo" src="img/logo/logo.png" alt="" /></a>
                </div>
            </div>
        </div>
    </div>
    <div class="header-advance-area">
        <div class="header-top-area">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="header-top-wraper">
                            <div class="row">
                                <div class="col-lg-1 col-md-0 col-sm-1 col-xs-12">
                                </div>
                                <div class="col-lg-6 col-md-7 col-sm-6 col-xs-12">
                                    <div class="header-top-menu tabl-d-n">
                                        <ul class="nav navbar-nav mai-top-nav">
                                            <li class="nav-item"><a href="/home" class="nav-link">Home</a>
                                            </li>
                                            <li class="nav-item"><a href="#" class="nav-link">About Us</a>
                                            </li>
                                            <li class="nav-item"><a href="#" class="nav-link">SDGs</a>
                                            </li>
                                            <li class="nav-item dropdown res-dis-nn">
                                                <a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle">Services <span class="angle-down-topmenu"><i class="fa fa-angle-down"></i></span></a>
                                                <div role="menu" class="dropdown-menu animated zoomIn">
                                                    <a href="/addCourse" class="dropdown-item">Add Course</a>
                                                    <a href="/addLesson" class="dropdown-item">Add Lesson</a>
                                                    <a href="/addUnit" class="dropdown-item">Add Unit</a>
                                                    <a href="/addSector" class="dropdown-item">Add Sector</a>
                                                    <a href="/addStudent" class="dropdown-item">Add Student</a>
                                                    <a href="/addTeacher" class="dropdown-item">Add Professor</a>
                                                    <a href="/addClasse" class="dropdown-item">Add Classe</a>
                                                    <a href="/addProgramme" class="dropdown-item">Add Programme</a>
                                                    <a href="/addGroupeStudent" class="dropdown-item">Add Groupe</a>
                                                    <a href="/addPresence" class="dropdown-item">Add Presence</a>
                                                    <a href="/addRating" class="dropdown-item">Add Rating</a>
                                                    <a href="/addQuiz" class="dropdown-item">Add Quiz</a>
                                                    <a href="/addQuestion" class="dropdown-item">Add Question</a>
                                                    <a href="/addObjective" class="dropdown-item">Add Objective</a>
                                                    <a href="/addRessource" class="dropdown-item">Add Ressource</a>
                                                    <a href="/addSpecialtie" class="dropdown-item">Add Specialite</a>
                                                    <a href="/addEvent" class="dropdown-item">Add Event</a>
                                                    <a href="/addFeedback" class="dropdown-item">Add Feedback</a>



                                                </div>
                                            </li>
                                            <li class="nav-item dropdown res-dis-nn">
                                                <a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle">Pages <span class="angle-down-topmenu"><i class="fa fa-angle-down"></i></span></a>
                                                <div role="menu" class="dropdown-menu animated zoomIn">
                                                    <a href="/allCourse" class="dropdown-item">All Course</a>
                                                    <a href="/allLesson" class="dropdown-item">All Lesson</a>
                                                    <a href="/allUnit" class="dropdown-item">All Unit</a>
                                                    <a href="/allSector" class="dropdown-item">All Sector</a>
                                                    <a href="/allStudent" class="dropdown-item">All Student</a>
                                                    <a href="/allTeacher" class="dropdown-item">All Professor</a>
                                                    <a href="/allClasse" class="dropdown-item">All Classe</a>
                                                    <a href="/allProgramme" class="dropdown-item">All Programme</a>
                                                    <a href="/allGroupeStudent" class="dropdown-item">All Groupe</a>
                                                    <a href="/allPresence" class="dropdown-item">All Presence</a>
                                                    <a href="/allRating" class="dropdown-item">All Rating</a>
                                                    <a href="/allQuiz" class="dropdown-item">All Quiz</a>
                                                    <a href="/allQuestion" class="dropdown-item">All Question</a>
                                                    <a href="/allObjective" class="dropdown-item">All Objective</a>
                                                    <a href="/allRessource" class="dropdown-item">All Ressource</a>
                                                    <a href="/allSpecialtie" class="dropdown-item">All Specialite</a>
                                                    <a href="/allEvent" class="dropdown-item">All Event</a>
                                                    <a href="/allFeedback" class="dropdown-item">All Feedback</a>



                                                </div>
                                            </li>
                                            <li class="nav-item"><a href="#" class="nav-link">Contact Us</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                                    <div class="header-right-info">
                                        <ul class="nav navbar-nav mai-top-nav header-right-menu">
                                            <li class="nav-item">
                                                <a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle">
                                                    <img src="img/product/pro4.jpg" alt="" />
                                                    <span class="admin-name">Bytes Minds</span>
                                                    <i class="fa fa-angle-down edu-icon edu-down-arrow"></i>
                                                </a>
                                                <ul role="menu" class="dropdown-header-top author-log dropdown-menu animated zoomIn">
                                                    <li><a href="#"><span class="edu-icon edu-home-admin author-log-ic"></span>My Account</a>
                                                    </li>
                                                    <li><a href="#"><span class="edu-icon edu-settings author-log-ic"></span>Settings</a>
                                                    </li>
                                                    <li><a href="#"><span class="edu-icon edu-locked author-log-ic"></span>Log Out</a>
                                                    </li>
                                                </ul>
                                            </li>

                                            <div role="menu" class="admintab-wrap menu-setting-wrap menu-setting-wrap-bg dropdown-menu animated zoomIn">

                                            </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container mt-5">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <a class="nav-link active" id="group-tab" data-toggle="tab" href="#group" role="tab" aria-controls="group" aria-selected="true">Assigner des étudiants à un groupe</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="class-tab" data-toggle="tab" href="#class" role="tab" aria-controls="class" aria-selected="false">Assigner un étudiant à une classe</a>
                </li>
            </ul>
            <div class="tab-content mt-4" id="myTabContent">
                <div class="tab-pane fade show active" id="group" role="tabpanel" aria-labelledby="group-tab">
                    <h1>Assigner des étudiants à un groupe</h1>
                    <form id="assignStudentsForm">
                        <div class="form-group">
                            <label for="group-select">Sélectionner un groupe :</label>
                            <select class="form-control" id="group-select" name="group-select"></select>
                        </div>
                        <div class="form-group">
                            <label for="student-select">Sélectionner des étudiants :</label>
                            <select class="form-control" id="student-select" name="student-select" multiple></select>
                        </div>
                        <button class="btn btn-success" type="button" id="assign-students">Assigner</button>
                    </form>
                </div>
                <div class="tab-pane fade" id="class" role="tabpanel" aria-labelledby="class-tab">
                    <h1>Assigner un étudiant à une classe</h1>
                    <form id="assignStudentForm">
                        <div class="form-group">
                            <label for="studentName">Nom de l'étudiant :</label>
                            <select class="form-control" id="studentName" name="studentName" required></select>
                        </div>
                        <div class="form-group">
                            <label for="className">Nom de la classe :</label>
                            <select class="form-control" id="className" name="className" required></select>
                        </div>
                        <button class="btn btn-primary" type="submit">Assigner l'étudiant</button>
                    </form>
                </div>
            </div>
        </div>




    </div>

    <div class="footer-copyright-area">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="footer-copy-right">
                        <p>Copyright 2024 Courzelo - Tous droits réservés</p>
                        <p>Made with creativity by Byte Minds</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- jquery
    ============================================ -->
<script src="js/vendor/jquery-1.12.4.min.js"></script>
<!-- bootstrap JS
    ============================================ -->
<script src="js/bootstrap.min.js"></script>
<!-- wow JS
    ============================================ -->
<script src="js/wow.min.js"></script>
<!-- price-slider JS
    ============================================ -->
<script src="js/jquery-price-slider.js"></script>
<!-- meanmenu JS
    ============================================ -->
<script src="js/jquery.meanmenu.js"></script>
<!-- owl.carousel JS
    ============================================ -->
<script src="js/owl.carousel.min.js"></script>
<!-- sticky JS
    ============================================ -->
<script src="js/jquery.sticky.js"></script>
<!-- scrollUp JS
    ============================================ -->
<script src="js/jquery.scrollUp.min.js"></script>
<!-- mCustomScrollbar JS
    ============================================ -->
<script src="js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/scrollbar/mCustomScrollbar-active.js"></script>
<!-- metisMenu JS
    ============================================ -->
<script src="js/metisMenu/metisMenu.min.js"></script>
<script src="js/metisMenu/metisMenu-active.js"></script>
<!-- morrisjs JS
    ============================================ -->
<script src="js/sparkline/jquery.sparkline.min.js"></script>
<script src="js/sparkline/jquery.charts-sparkline.js"></script>
<!-- calendar JS
    ============================================ -->
<script src="js/calendar/moment.min.js"></script>
<script src="js/calendar/fullcalendar.min.js"></script>
<script src="js/calendar/fullcalendar-active.js"></script>
<!-- maskedinput JS
    ============================================ -->
<script src="js/jquery.maskedinput.min.js"></script>
<script src="js/masking-active.js"></script>
<!-- datepicker JS
    ============================================ -->
<script src="js/datepicker/jquery-ui.min.js"></script>
<script src="js/datepicker/datepicker-active.js"></script>
<!-- form validate JS
    ============================================ -->
<script src="js/form-validation/jquery.form.min.js"></script>
<script src="js/form-validation/jquery.validate.min.js"></script>
<script src="js/form-validation/form-active.js"></script>
<!-- dropzone JS
    ============================================ -->
<script src="js/dropzone/dropzone.js"></script>
<!-- tab JS
    ============================================ -->
<script src="js/tab.js"></script>
<!-- plugins JS
    ============================================ -->
<script src="js/plugins.js"></script>
<!-- main JS
    ============================================ -->
<script src="js/main.js"></script>
<!-- tawk chat JS
    ============================================ -->
<script src="js/tawk-chat.js"></script>
<script>
    // Fetch student names and populate select dropdown
    fetch('/api/students')
        .then(response => response.json())
        .then(studentNames => {
            const studentSelect = document.getElementById('studentName');
            studentNames.forEach(name => {
                const option = document.createElement('option');
                option.text = name.firstName + ' ' + name.lastName; // Adjust to match your JSON structure
                studentSelect.add(option);
            });
        })
        .catch(error => console.error('Error fetching students:', error));

    // Fetch class names and populate select dropdown
    fetch('/api/classess')
        .then(response => response.json())
        .then(classNames => {
            const classSelect = document.getElementById('className');
            classNames.forEach(cls => {
                const option = document.createElement('option');
                option.text = cls.name; // Assuming the property for class name is "name"
                classSelect.add(option);
            });
        })
        .catch(error => console.error('Error fetching classes:', error));


    // Handle form submission
    document.getElementById('assignStudentForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const formData = new FormData(this);
        const studentName = formData.get('studentName');
        const className = formData.get('className');

        const [firstName, lastName] = studentName.split(' '); // Assuming studentName is in "First Last" format

        fetch(`/api/students/${firstName}/${lastName}/assign-class/${className}`, {
            method: 'PUT'
        })
            .then(response => {
                if (response.ok) {
                    return response.text();
                }
                throw new Error('Error assigning student to class.');
            })
            .then(data => {
                alert(data); // Show success message or error message
            })
            .catch(error => {
                alert(error.message); // Show error message
            });
    });

</script>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        fetchGroupStudents();
        fetchStudents();

        document.getElementById('assign-students').addEventListener('click', () => {
            assignStudentsToGroup();
        });
    });
    fetch('https://va.tawk.to/v1/session/start', {
        method: 'POST',
        mode: 'no-cors',
        headers: {
            'Content-Type': 'application/json',
            // Autres en-têtes nécessaires
        },
        body: JSON.stringify(data) // Assurez-vous de remplacer 'data' par vos données
    })
        .then(response => {
            if (response.ok) {
                return response.json();
            }
            throw new Error('Network response was not ok.');
        })
        .then(data => {
            console.log(data);
        })
        .catch(error => {
            console.error('There was a problem with your fetch operation:', error);
        });

    function fetchGroupStudents() {
        fetch('/api/groupeStudents')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erreur HTTP : ' + response.status);
                }
                return response.json();
            })
            .then(groupStudents => {
                const groupSelect = document.getElementById('group-select');
                groupSelect.innerHTML = ''; // Efface le contenu précédent du sélecteur

                groupStudents.forEach(groupStudent => {
                    const option = document.createElement('option');
                    option.value = groupStudent.groupstudentId;
                    option.textContent = groupStudent.nomGroupe;
                    groupSelect.appendChild(option);
                });
            })
            .catch(error => {
                console.error('Erreur lors de la récupération des groupes d\'étudiants:', error);
                // Gérer l'erreur ici (afficher un message d'erreur, etc.)
            });
    }


    function fetchStudents() {
        fetch('/api/students') // Remplacez par l'URL de votre API
            .then(response => response.json())
            .then(students => {
                const studentSelect = document.getElementById('student-select');
                students.forEach(student => {
                    const option = document.createElement('option');
                    option.value = student.studentId; // Assurez-vous que 'studentId' correspond à votre clé d'identifiant
                    option.textContent = `${student.firstName} ${student.lastName}`; // Combiner prénom et nom
                    // Si l'étudiant est déjà affecté à un groupe, désactivez l'option dans le sélecteur
                    if (student.assignedToGroup) {
                        option.disabled = true;
                        option.title = "This student is already assigned to another group.";
                    }
                    studentSelect.appendChild(option);
                });
            })
            .catch(error => console.error('Erreur lors de la récupération des étudiants:', error));
    }

    function assignStudentsToGroup() {
        const nomGroupe = document.getElementById('group-select').selectedOptions[0].text;
        const selectedStudents = Array.from(document.getElementById('student-select').selectedOptions).map(option => {
            return { studentId: option.value }; // Créez un objet Student avec l'ID de l'étudiant sélectionné
        });

        fetch(`/api/groupeStudents/${encodeURIComponent(nomGroupe)}/assignStudents`, {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(selectedStudents) // Envoyez un ensemble d'objets Student au format JSON
        })
            .then(response => {
                if (response.ok) {
                    alert("Les étudiants ont été assignés avec succès au groupe.");
                    window.location.href = '/allGroupeStudent';
                } else {
                    alert("Une erreur est survenue lors de l'assignation des étudiants au groupe.");
                }
            })
            .catch(error => console.error("Error:", error));
    }

</script>






</body>

</html>